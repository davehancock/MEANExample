var app=angular.module("social",["ngRoute","ngAnimate","ui.bootstrap"]);app.controller("ApplicationCtrl",["$scope","UserService","$modal","$log",function(t,o,e,n){var r=function(){var e=window.localStorage.getItem("token");e&&o.getUser().then(function(o){t.currentUser=o.data})};r(),t.$on("login",function(o,e){t.currentUser=e}),t.logout=function(){var r=e.open({templateUrl:"logout/logout-modal.html",controller:"LogoutModalCtrl"});r.result.then(function(e){o.logout(),t.currentUser=null},function(){n.info("modal dismissed at: "+new Date)})}}]),angular.module("social").config(["$routeProvider","$locationProvider",function(t,o){t.when("/",{controller:"PostsCtrl",templateUrl:"./posts/posts.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"./register/register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"./login/login.html"}),o.html5Mode(!0)}]),app.controller("LogoutModalCtrl",["$scope","$modalInstance",function(t,o){t.logout=function(){o.close()},t.cancel=function(){o.dismiss("cancel")}}]),app.controller("LoginCtrl",["$scope","UserService",function(t,o){t.login=function(e,n){o.login(e,n).then(function(o){t.$emit("login",o.data)})}}]),app.controller("PostsCtrl",["$scope","PostsService",function(t,o){o.getPosts().success(function(o){t.posts=o}),t.addPost=function(){t.postBody&&o.savePost({body:t.postBody}).success(function(o){t.posts.unshift(o),t.postBody=null})}}]),app.service("PostsService",["$http",function(t){this.getPosts=function(){return t.get("/api/posts")},this.savePost=function(o){return t.post("/api/posts",o)}}]),app.controller("RegisterCtrl",["$scope","UserService",function(t,o){t.createUser=function(e,n){var r={username:e,password:n};o.createUser(r).then(function(e){o.login(e.data.username,n).then(function(o){t.$emit("login",o.data)})})}}]),app.service("UserService",["$http",function(t){var o=this;o.login=function(e,n){return t.post("/api/sessions",{username:e,password:n}).then(function(t){return window.localStorage.setItem("token",t.data),o.getUser()})},o.logout=function(){t.defaults.headers.common["X-Auth"]="",window.localStorage.clear()},o.getUser=function(){return t.defaults.headers.common["X-Auth"]=window.localStorage.getItem("token"),t.get("/api/users")},o.createUser=function(o){return t.post("api/users",o)}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFwcGxpY2F0aW9uLWNvbnRyb2xsZXIuanMiLCJyb3V0ZXMuanMiLCJsb2dvdXQvbG9nb3V0LWNvbnRyb2xsZXIuanMiLCJsb2dpbi9sb2dpbi1jb250cm9sbGVyLmpzIiwicG9zdHMvcG9zdHMtY29udHJvbGxlci5qcyIsInBvc3RzL3Bvc3RzLXNlcnZpY2UuanMiLCJyZWdpc3Rlci9yZWdpc3Rlci1jb250cm9sbGVyLmpzIiwidXNlci91c2VyLXNlcnZpY2UuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJVc2VyU2VydmljZSIsIiRtb2RhbCIsIiRsb2ciLCJjaGVja0xhc3RVc2VyIiwibGFzdFVzZXIiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZ2V0VXNlciIsInRoZW4iLCJyZXNwb25zZSIsImN1cnJlbnRVc2VyIiwiZGF0YSIsIiRvbiIsIl8iLCJ1c2VyIiwibG9nb3V0IiwibW9kYWxJbnN0YW5jZSIsIm9wZW4iLCJ0ZW1wbGF0ZVVybCIsInJlc3VsdCIsImRvTG9nb3V0IiwiaW5mbyIsIkRhdGUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwid2hlbiIsImh0bWw1TW9kZSIsIiRtb2RhbEluc3RhbmNlIiwiY2xvc2UiLCJjYW5jZWwiLCJkaXNtaXNzIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiJGVtaXQiLCJQb3N0c1NlcnZpY2UiLCJnZXRQb3N0cyIsInN1Y2Nlc3MiLCJwb3N0cyIsImFkZFBvc3QiLCJwb3N0Qm9keSIsInNhdmVQb3N0IiwiYm9keSIsInVuc2hpZnQiLCJzZXJ2aWNlIiwiJGh0dHAiLCJ0aGlzIiwiZ2V0IiwicG9zdCIsImNyZWF0ZVVzZXIiLCJzZXRJdGVtIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiY2xlYXIiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLEtB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QSxVQUFBbEQsT0FBQUMsYUFBQUMsUUFBQSxTQUNBd0MsRUFBQUUsSUFBQSxlQUdBSCxFQUFBSyxXQUFBLFNBQUFwQyxHQUNBLE1BQUFnQyxHQUFBRyxLQUFBLFlBQUFuQyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ3NvY2lhbCcsIFsnbmdSb3V0ZScsICduZ0FuaW1hdGUnLCAndWkuYm9vdHN0cmFwJ10pOyIsImFwcC5jb250cm9sbGVyKCdBcHBsaWNhdGlvbkN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2VyU2VydmljZSwgJG1vZGFsLCAkbG9nKSB7XG5cbiAgICB2YXIgY2hlY2tMYXN0VXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxhc3RVc2VyID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpO1xuICAgICAgICBpZiAobGFzdFVzZXIpIHtcbiAgICAgICAgICAgIFVzZXJTZXJ2aWNlLmdldFVzZXIoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50VXNlciA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrTGFzdFVzZXIoKTtcblxuICAgICRzY29wZS4kb24oJ2xvZ2luJywgZnVuY3Rpb24gKF8sIHVzZXIpIHtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRVc2VyID0gdXNlcjtcbiAgICB9KVxuXG4gICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbG9nb3V0L2xvZ291dC1tb2RhbC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdMb2dvdXRNb2RhbEN0cmwnLFxuICAgICAgICB9KTtcblxuICAgICAgICBtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChkb0xvZ291dCkge1xuICAgICAgICAgICAgVXNlclNlcnZpY2UubG9nb3V0KCk7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudFVzZXIgPSBudWxsO1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkbG9nLmluZm8oJ21vZGFsIGRpc21pc3NlZCBhdDogJyArIG5ldyBEYXRlKCkpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG59KTtcblxuXG5cbiIsImFuZ3VsYXIubW9kdWxlKCdzb2NpYWwnKS5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuXG4gICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgICAgLndoZW4oJy8nLCB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUG9zdHNDdHJsJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi9wb3N0cy9wb3N0cy5odG1sJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL3JlZ2lzdGVyJywge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1JlZ2lzdGVyQ3RybCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vcmVnaXN0ZXIvcmVnaXN0ZXIuaHRtbCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9sb2dpbicsIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdMb2dpbkN0cmwnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL2xvZ2luL2xvZ2luLmh0bWwnXG4gICAgICAgIH0pO1xuXG4gICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuXG59KTsiLCJhcHAuY29udHJvbGxlcignTG9nb3V0TW9kYWxDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UpIHtcblxuICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKCk7XG4gICAgfTtcblxuICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuICAgIH07XG5cbn0pOyIsImFwcC5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2VyU2VydmljZSkge1xuXG4gICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICBVc2VyU2VydmljZS5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ2xvZ2luJywgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbn0pOyIsImFwcC5jb250cm9sbGVyKCdQb3N0c0N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBQb3N0c1NlcnZpY2UpIHtcblxuICAgIFBvc3RzU2VydmljZS5nZXRQb3N0cygpLnN1Y2Nlc3MoZnVuY3Rpb24gKHBvc3RzKSB7XG4gICAgICAgICRzY29wZS5wb3N0cyA9IHBvc3RzO1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLmFkZFBvc3QgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgaWYgKCRzY29wZS5wb3N0Qm9keSkge1xuXG4gICAgICAgICAgICBQb3N0c1NlcnZpY2Uuc2F2ZVBvc3Qoe2JvZHk6ICRzY29wZS5wb3N0Qm9keX0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucG9zdHMudW5zaGlmdChkYXRhKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUucG9zdEJvZHkgPSBudWxsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbn0pOyIsImFwcC5zZXJ2aWNlKCdQb3N0c1NlcnZpY2UnLCBmdW5jdGlvbiAoJGh0dHApIHtcblxuICAgIHRoaXMuZ2V0UG9zdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcG9zdHMnKTtcbiAgICB9XG5cbiAgICB0aGlzLnNhdmVQb3N0ID0gZnVuY3Rpb24gKHBvc3QpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcG9zdHMnLCBwb3N0KTtcbiAgICB9XG5cbn0pOyIsImFwcC5jb250cm9sbGVyKCdSZWdpc3RlckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2VyU2VydmljZSkge1xuXG4gICAgJHNjb3BlLmNyZWF0ZVVzZXIgPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG5cbiAgICAgICAgdmFyIHVzZXIgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgfVxuXG4gICAgICAgIFVzZXJTZXJ2aWNlLmNyZWF0ZVVzZXIodXNlcilcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIFVzZXJTZXJ2aWNlLmxvZ2luKHJlc3BvbnNlLmRhdGEudXNlcm5hbWUsIHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ2xvZ2luJywgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbn0pOyIsImFwcC5zZXJ2aWNlKCdVc2VyU2VydmljZScsIGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgdmFyIHNlcnZpY2UgPSB0aGlzO1xuXG4gICAgc2VydmljZS5sb2dpbiA9IGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMnLCB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlLmdldFVzZXIoKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBzZXJ2aWNlLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aCddID0gXCJcIjtcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICAgIH1cblxuICAgIHNlcnZpY2UuZ2V0VXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aCddID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpO1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzJyk7XG4gICAgfVxuXG4gICAgc2VydmljZS5jcmVhdGVVc2VyID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJ2FwaS91c2VycycsIHVzZXIpO1xuICAgIH1cblxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9