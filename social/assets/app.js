var app=angular.module("social",["ngRoute","ngAnimate","ui.bootstrap"]);app.controller("ApplicationCtrl",["$scope","UserService","$modal","$log",function(t,o,e,n){var r=function(){var e=window.localStorage.getItem("token");e&&o.getUser().then(function(o){t.currentUser=o.data})};r(),t.$on("login",function(o,e){t.currentUser=e}),t.logout=function(){var r=e.open({templateUrl:"logout/logout-modal.html",controller:"LogoutModalCtrl"});r.result.then(function(e){o.logout(),t.currentUser=null},function(){n.info("modal dismissed at: "+new Date)})}}]),angular.module("social").config(["$routeProvider","$locationProvider",function(t,o){t.when("/",{controller:"PostsCtrl",templateUrl:"./posts/posts.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"./register/register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"./login/login.html"}),o.html5Mode(!0)}]),app.controller("LoginCtrl",["$scope","UserService",function(t,o){t.login=function(e,n){o.login(e,n).then(function(o){t.$emit("login",o.data)})}}]),app.controller("LogoutModalCtrl",["$scope","$modalInstance",function(t,o){t.logout=function(){o.close()},t.cancel=function(){o.dismiss("cancel")}}]),app.controller("PostsCtrl",["$scope","PostsService",function(t,o){o.getPosts().success(function(o){t.posts=o}),t.addPost=function(){t.postBody&&o.savePost({body:t.postBody}).success(function(o){t.posts.unshift(o),t.postBody=null})}}]),app.service("PostsService",["$http",function(t){this.getPosts=function(){return t.get("/api/posts")},this.savePost=function(o){return t.post("/api/posts",o)}}]),app.controller("RegisterCtrl",["$scope","UserService",function(t,o){t.createUser=function(e,n){var r={username:e,password:n};o.createUser(r).then(function(e){o.login(e.data.username,n).then(function(o){t.$emit("login",o.data)})})}}]),app.service("UserService",["$http",function(t){var o=this;o.login=function(e,n){return t.post("/api/sessions",{username:e,password:n}).then(function(t){return window.localStorage.setItem("token",t.data),o.getUser()})},o.logout=function(){t.defaults.headers.common["X-Auth"]="",window.localStorage.clear()},o.getUser=function(){return t.defaults.headers.common["X-Auth"]=window.localStorage.getItem("token"),t.get("/api/users")},o.createUser=function(o){return t.post("api/users",o)}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFwcGxpY2F0aW9uLWNvbnRyb2xsZXIuanMiLCJyb3V0ZXMuanMiLCJsb2dpbi9sb2dpbi1jb250cm9sbGVyLmpzIiwibG9nb3V0L2xvZ291dC1jb250cm9sbGVyLmpzIiwicG9zdHMvcG9zdHMtY29udHJvbGxlci5qcyIsInBvc3RzL3Bvc3RzLXNlcnZpY2UuanMiLCJyZWdpc3Rlci9yZWdpc3Rlci1jb250cm9sbGVyLmpzIiwidXNlci91c2VyLXNlcnZpY2UuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJVc2VyU2VydmljZSIsIiRtb2RhbCIsIiRsb2ciLCJjaGVja0xhc3RVc2VyIiwibGFzdFVzZXIiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZ2V0VXNlciIsInRoZW4iLCJyZXNwb25zZSIsImN1cnJlbnRVc2VyIiwiZGF0YSIsIiRvbiIsIl8iLCJ1c2VyIiwibG9nb3V0IiwibW9kYWxJbnN0YW5jZSIsIm9wZW4iLCJ0ZW1wbGF0ZVVybCIsInJlc3VsdCIsImRvTG9nb3V0IiwiaW5mbyIsIkRhdGUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwid2hlbiIsImh0bWw1TW9kZSIsImxvZ2luIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsIiRlbWl0IiwiJG1vZGFsSW5zdGFuY2UiLCJjbG9zZSIsImNhbmNlbCIsImRpc21pc3MiLCJQb3N0c1NlcnZpY2UiLCJnZXRQb3N0cyIsInN1Y2Nlc3MiLCJwb3N0cyIsImFkZFBvc3QiLCJwb3N0Qm9keSIsInNhdmVQb3N0IiwiYm9keSIsInVuc2hpZnQiLCJzZXJ2aWNlIiwiJGh0dHAiLCJ0aGlzIiwiZ2V0IiwicG9zdCIsImNyZWF0ZVVzZXIiLCJzZXRJdGVtIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiY2xlYXIiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLEtBQUFDLFFBQUFDLE9BQUEsVUFBQSxVQUFBLFlBQUEsZ0JDQUFGLEtBQUFHLFdBQUEsbUJBQUEsU0FBQSxjQUFBLFNBQUEsT0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUVBLEdBQUFDLEdBQUEsV0FDQSxHQUFBQyxHQUFBQyxPQUFBQyxhQUFBQyxRQUFBLFFBQ0FILElBQ0FKLEVBQUFRLFVBQUFDLEtBQUEsU0FBQUMsR0FDQVgsRUFBQVksWUFBQUQsRUFBQUUsT0FLQVQsS0FFQUosRUFBQWMsSUFBQSxRQUFBLFNBQUFDLEVBQUFDLEdBQ0FoQixFQUFBWSxZQUFBSSxJQUdBaEIsRUFBQWlCLE9BQUEsV0FFQSxHQUFBQyxHQUFBaEIsRUFBQWlCLE1BQ0FDLFlBQUEsMkJBQ0FyQixXQUFBLG1CQUdBbUIsR0FBQUcsT0FBQVgsS0FBQSxTQUFBWSxHQUNBckIsRUFBQWdCLFNBQ0FqQixFQUFBWSxZQUFBLE1BQ0EsV0FDQVQsRUFBQW9CLEtBQUEsdUJBQUEsR0FBQUMsYUM1QkEzQixRQUFBQyxPQUFBLFVBQUEyQixRQUFBLGlCQUFBLG9CQUFBLFNBQUFDLEVBQUFDLEdBRUFELEVBQ0FFLEtBQUEsS0FDQTdCLFdBQUEsWUFDQXFCLFlBQUEsdUJBRUFRLEtBQUEsYUFDQTdCLFdBQUEsZUFDQXFCLFlBQUEsNkJBRUFRLEtBQUEsVUFDQTdCLFdBQUEsWUFDQXFCLFlBQUEsdUJBR0FPLEVBQUFFLFdBQUEsTUNoQkFqQyxJQUFBRyxXQUFBLGFBQUEsU0FBQSxjQUFBLFNBQUFDLEVBQUFDLEdBRUFELEVBQUE4QixNQUFBLFNBQUFDLEVBQUFDLEdBQ0EvQixFQUFBNkIsTUFBQUMsRUFBQUMsR0FDQXRCLEtBQUEsU0FBQUMsR0FDQVgsRUFBQWlDLE1BQUEsUUFBQXRCLEVBQUFFLFlDTEFqQixJQUFBRyxXQUFBLG1CQUFBLFNBQUEsaUJBQUEsU0FBQUMsRUFBQWtDLEdBRUFsQyxFQUFBaUIsT0FBQSxXQUNBaUIsRUFBQUMsU0FHQW5DLEVBQUFvQyxPQUFBLFdBQ0FGLEVBQUFHLFFBQUEsY0NQQXpDLElBQUFHLFdBQUEsYUFBQSxTQUFBLGVBQUEsU0FBQUMsRUFBQXNDLEdBRUFBLEVBQUFDLFdBQUFDLFFBQUEsU0FBQUMsR0FDQXpDLEVBQUF5QyxNQUFBQSxJQUdBekMsRUFBQTBDLFFBQUEsV0FFQTFDLEVBQUEyQyxVQUVBTCxFQUFBTSxVQUFBQyxLQUFBN0MsRUFBQTJDLFdBQUFILFFBQUEsU0FBQTNCLEdBQ0FiLEVBQUF5QyxNQUFBSyxRQUFBakMsR0FDQWIsRUFBQTJDLFNBQUEsV0NaQS9DLElBQUFtRCxRQUFBLGdCQUFBLFFBQUEsU0FBQUMsR0FFQUMsS0FBQVYsU0FBQSxXQUNBLE1BQUFTLEdBQUFFLElBQUEsZUFHQUQsS0FBQUwsU0FBQSxTQUFBTyxHQUNBLE1BQUFILEdBQUFHLEtBQUEsYUFBQUEsT0NQQXZELElBQUFHLFdBQUEsZ0JBQUEsU0FBQSxjQUFBLFNBQUFDLEVBQUFDLEdBRUFELEVBQUFvRCxXQUFBLFNBQUFyQixFQUFBQyxHQUVBLEdBQUFoQixJQUNBZSxTQUFBQSxFQUNBQyxTQUFBQSxFQUdBL0IsR0FBQW1ELFdBQUFwQyxHQUNBTixLQUFBLFNBQUFDLEdBQ0FWLEVBQUE2QixNQUFBbkIsRUFBQUUsS0FBQWtCLFNBQUFDLEdBQUF0QixLQUFBLFNBQUFDLEdBQ0FYLEVBQUFpQyxNQUFBLFFBQUF0QixFQUFBRSxjQ1pBakIsSUFBQW1ELFFBQUEsZUFBQSxRQUFBLFNBQUFDLEdBRUEsR0FBQUQsR0FBQUUsSUFFQUYsR0FBQWpCLE1BQUEsU0FBQUMsRUFBQUMsR0FDQSxNQUFBZ0IsR0FBQUcsS0FBQSxpQkFDQXBCLFNBQUFBLEVBQ0FDLFNBQUFBLElBQ0F0QixLQUFBLFNBQUFDLEdBRUEsTUFEQUwsUUFBQUMsYUFBQThDLFFBQUEsUUFBQTFDLEVBQUFFLE1BQ0FrQyxFQUFBdEMsYUFJQXNDLEVBQUE5QixPQUFBLFdBQ0ErQixFQUFBTSxTQUFBQyxRQUFBQyxPQUFBLFVBQUEsR0FDQWxELE9BQUFDLGFBQUFrRCxTQUdBVixFQUFBdEMsUUFBQSxXQUVBLE1BREF1QyxHQUFBTSxTQUFBQyxRQUFBQyxPQUFBLFVBQUFsRCxPQUFBQyxhQUFBQyxRQUFBLFNBQ0F3QyxFQUFBRSxJQUFBLGVBR0FILEVBQUFLLFdBQUEsU0FBQXBDLEdBQ0EsTUFBQWdDLEdBQUFHLEtBQUEsWUFBQW5DIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnc29jaWFsJywgWyduZ1JvdXRlJywgJ25nQW5pbWF0ZScsICd1aS5ib290c3RyYXAnXSk7IiwiYXBwLmNvbnRyb2xsZXIoJ0FwcGxpY2F0aW9uQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFVzZXJTZXJ2aWNlLCAkbW9kYWwsICRsb2cpIHtcblxuICAgIHZhciBjaGVja0xhc3RVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGFzdFVzZXIgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7XG4gICAgICAgIGlmIChsYXN0VXNlcikge1xuICAgICAgICAgICAgVXNlclNlcnZpY2UuZ2V0VXNlcigpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRVc2VyID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2hlY2tMYXN0VXNlcigpO1xuXG4gICAgJHNjb3BlLiRvbignbG9naW4nLCBmdW5jdGlvbiAoXywgdXNlcikge1xuICAgICAgICAkc2NvcGUuY3VycmVudFVzZXIgPSB1c2VyO1xuICAgIH0pXG5cbiAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdsb2dvdXQvbG9nb3V0LW1vZGFsLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0xvZ291dE1vZGFsQ3RybCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24gKGRvTG9nb3V0KSB7XG4gICAgICAgICAgICBVc2VyU2VydmljZS5sb2dvdXQoKTtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50VXNlciA9IG51bGw7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRsb2cuaW5mbygnbW9kYWwgZGlzbWlzc2VkIGF0OiAnICsgbmV3IERhdGUoKSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbn0pO1xuXG5cblxuIiwiYW5ndWxhci5tb2R1bGUoJ3NvY2lhbCcpLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG5cbiAgICAkcm91dGVQcm92aWRlclxuICAgICAgICAud2hlbignLycsIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQb3N0c0N0cmwnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL3Bvc3RzL3Bvc3RzLmh0bWwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvcmVnaXN0ZXInLCB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUmVnaXN0ZXJDdHJsJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi9yZWdpc3Rlci9yZWdpc3Rlci5odG1sJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luQ3RybCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vbG9naW4vbG9naW4uaHRtbCdcbiAgICAgICAgfSk7XG5cbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cbn0pOyIsImFwcC5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2VyU2VydmljZSkge1xuXG4gICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICBVc2VyU2VydmljZS5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ2xvZ2luJywgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbn0pOyIsImFwcC5jb250cm9sbGVyKCdMb2dvdXRNb2RhbEN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSkge1xuXG4gICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG4gICAgfTtcblxufSk7IiwiYXBwLmNvbnRyb2xsZXIoJ1Bvc3RzQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFBvc3RzU2VydmljZSkge1xuXG4gICAgUG9zdHNTZXJ2aWNlLmdldFBvc3RzKCkuc3VjY2VzcyhmdW5jdGlvbiAocG9zdHMpIHtcbiAgICAgICAgJHNjb3BlLnBvc3RzID0gcG9zdHM7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuYWRkUG9zdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBpZiAoJHNjb3BlLnBvc3RCb2R5KSB7XG5cbiAgICAgICAgICAgIFBvc3RzU2VydmljZS5zYXZlUG9zdCh7Ym9keTogJHNjb3BlLnBvc3RCb2R5fSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5wb3N0cy51bnNoaWZ0KGRhdGEpO1xuICAgICAgICAgICAgICAgICRzY29wZS5wb3N0Qm9keSA9IG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxufSk7IiwiYXBwLnNlcnZpY2UoJ1Bvc3RzU2VydmljZScsIGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgdGhpcy5nZXRQb3N0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9wb3N0cycpO1xuICAgIH1cblxuICAgIHRoaXMuc2F2ZVBvc3QgPSBmdW5jdGlvbiAocG9zdCkge1xuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9wb3N0cycsIHBvc3QpO1xuICAgIH1cblxufSk7IiwiYXBwLmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFVzZXJTZXJ2aWNlKSB7XG5cbiAgICAkc2NvcGUuY3JlYXRlVXNlciA9IGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQpIHtcblxuICAgICAgICB2YXIgdXNlciA9IHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgICB9XG5cbiAgICAgICAgVXNlclNlcnZpY2UuY3JlYXRlVXNlcih1c2VyKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgVXNlclNlcnZpY2UubG9naW4ocmVzcG9uc2UuZGF0YS51c2VybmFtZSwgcGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCgnbG9naW4nLCByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxufSk7IiwiYXBwLnNlcnZpY2UoJ1VzZXJTZXJ2aWNlJywgZnVuY3Rpb24gKCRodHRwKSB7XG5cbiAgICB2YXIgc2VydmljZSA9IHRoaXM7XG5cbiAgICBzZXJ2aWNlLmxvZ2luID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zZXNzaW9ucycsIHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIHNlcnZpY2UubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1BdXRoJ10gPSBcIlwiO1xuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgfVxuXG4gICAgc2VydmljZS5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1BdXRoJ10gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7XG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlcnMnKTtcbiAgICB9XG5cbiAgICBzZXJ2aWNlLmNyZWF0ZVVzZXIgPSBmdW5jdGlvbiAodXNlcikge1xuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnYXBpL3VzZXJzJywgdXNlcik7XG4gICAgfVxuXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=