var app=angular.module("social",["ngRoute","ngAnimate","ui.bootstrap"]);app.controller("ApplicationCtrl",["$scope","UserService","$modal","$log",function(t,o,e,n){var r=function(){var e=window.localStorage.getItem("token");e&&o.getUser().then(function(o){t.currentUser=o.data})};r(),t.$on("login",function(o,e){t.currentUser=e}),t.logout=function(){var r=e.open({templateUrl:"logout/logout-modal.html",controller:"LogoutModalCtrl"});r.result.then(function(e){o.logout(),t.currentUser=null},function(){n.info("modal dismissed at: "+new Date)})}}]),angular.module("social").config(["$routeProvider","$locationProvider",function(t,o){t.when("/",{controller:"PostsCtrl",templateUrl:"./posts/posts.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"./register/register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"./login/login.html"}),o.html5Mode(!0)}]),app.controller("LoginCtrl",["$scope","UserService",function(t,o){t.login=function(e,n){o.login(e,n).then(function(o){t.$emit("login",o.data)})}}]),app.controller("PostsCtrl",["$scope","PostsService",function(t,o){o.getPosts().success(function(o){t.posts=o}),t.addPost=function(){t.postBody&&o.savePost({body:t.postBody}).success(function(o){t.posts.unshift(o),t.postBody=null})}}]),app.service("PostsService",["$http",function(t){this.getPosts=function(){return t.get("/api/posts")},this.savePost=function(o){return t.post("/api/posts",o)}}]),app.controller("LogoutModalCtrl",["$scope","$modalInstance",function(t,o){t.logout=function(){o.close()},t.cancel=function(){o.dismiss("cancel")}}]),app.controller("RegisterCtrl",["$scope","UserService",function(t,o){t.createUser=function(e,n){var r={username:e,password:n};o.createUser(r).then(function(e){o.login(e.data.username,n).then(function(o){t.$emit("login",o.data)})})}}]),app.service("UserService",["$http",function(t){var o=this;o.login=function(e,n){return t.post("/api/sessions",{username:e,password:n}).then(function(t){return window.localStorage.setItem("token",t.data),o.getUser()})},o.logout=function(){t.defaults.headers.common["X-Auth"]="",window.localStorage.clear()},o.getUser=function(){return t.defaults.headers.common["X-Auth"]=window.localStorage.getItem("token"),t.get("/api/users")},o.createUser=function(o){return t.post("api/users",o)}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFwcGxpY2F0aW9uLWNvbnRyb2xsZXIuanMiLCJyb3V0ZXMuanMiLCJsb2dpbi9sb2dpbi1jb250cm9sbGVyLmpzIiwicG9zdHMvcG9zdHMtY29udHJvbGxlci5qcyIsInBvc3RzL3Bvc3RzLXNlcnZpY2UuanMiLCJsb2dvdXQvbG9nb3V0LWNvbnRyb2xsZXIuanMiLCJyZWdpc3Rlci9yZWdpc3Rlci1jb250cm9sbGVyLmpzIiwidXNlci91c2VyLXNlcnZpY2UuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJVc2VyU2VydmljZSIsIiRtb2RhbCIsIiRsb2ciLCJjaGVja0xhc3RVc2VyIiwibGFzdFVzZXIiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZ2V0VXNlciIsInRoZW4iLCJyZXNwb25zZSIsImN1cnJlbnRVc2VyIiwiZGF0YSIsIiRvbiIsIl8iLCJ1c2VyIiwibG9nb3V0IiwibW9kYWxJbnN0YW5jZSIsIm9wZW4iLCJ0ZW1wbGF0ZVVybCIsInJlc3VsdCIsImRvTG9nb3V0IiwiaW5mbyIsIkRhdGUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwid2hlbiIsImh0bWw1TW9kZSIsImxvZ2luIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsIiRlbWl0IiwiUG9zdHNTZXJ2aWNlIiwiZ2V0UG9zdHMiLCJzdWNjZXNzIiwicG9zdHMiLCJhZGRQb3N0IiwicG9zdEJvZHkiLCJzYXZlUG9zdCIsImJvZHkiLCJ1bnNoaWZ0Iiwic2VydmljZSIsIiRodHRwIiwidGhpcyIsImdldCIsInBvc3QiLCIkbW9kYWxJbnN0YW5jZSIsImNsb3NlIiwiY2FuY2VsIiwiZGlzbWlzcyIsImNyZWF0ZVVzZXIiLCJzZXRJdGVtIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiY2xlYXIiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLEtB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QSxVQUFBbEQsT0FBQUMsYUFBQUMsUUFBQSxTQUNBb0MsRUFBQUUsSUFBQSxlQUdBSCxFQUFBUyxXQUFBLFNBQUFwQyxHQUNBLE1BQUE0QixHQUFBRyxLQUFBLFlBQUEvQiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ3NvY2lhbCcsIFsnbmdSb3V0ZScsICduZ0FuaW1hdGUnLCAndWkuYm9vdHN0cmFwJ10pOyIsImFwcC5jb250cm9sbGVyKCdBcHBsaWNhdGlvbkN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2VyU2VydmljZSwgJG1vZGFsLCAkbG9nKSB7XHJcblxyXG4gICAgdmFyIGNoZWNrTGFzdFVzZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGxhc3RVc2VyID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpO1xyXG4gICAgICAgIGlmIChsYXN0VXNlcikge1xyXG4gICAgICAgICAgICBVc2VyU2VydmljZS5nZXRVc2VyKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50VXNlciA9IHJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjaGVja0xhc3RVc2VyKCk7XHJcblxyXG4gICAgJHNjb3BlLiRvbignbG9naW4nLCBmdW5jdGlvbiAoXywgdXNlcikge1xyXG4gICAgICAgICRzY29wZS5jdXJyZW50VXNlciA9IHVzZXI7XHJcbiAgICB9KVxyXG5cclxuICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2xvZ291dC9sb2dvdXQtbW9kYWwuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdMb2dvdXRNb2RhbEN0cmwnLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChkb0xvZ291dCkge1xyXG4gICAgICAgICAgICBVc2VyU2VydmljZS5sb2dvdXQoKTtcclxuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRVc2VyID0gbnVsbDtcclxuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRsb2cuaW5mbygnbW9kYWwgZGlzbWlzc2VkIGF0OiAnICsgbmV3IERhdGUoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxufSk7XHJcblxyXG5cclxuXHJcbiIsImFuZ3VsYXIubW9kdWxlKCdzb2NpYWwnKS5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xyXG5cclxuICAgICRyb3V0ZVByb3ZpZGVyXHJcbiAgICAgICAgLndoZW4oJy8nLCB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQb3N0c0N0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vcG9zdHMvcG9zdHMuaHRtbCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC53aGVuKCcvcmVnaXN0ZXInLCB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdSZWdpc3RlckN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vcmVnaXN0ZXIvcmVnaXN0ZXIuaHRtbCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC53aGVuKCcvbG9naW4nLCB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdMb2dpbkN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vbG9naW4vbG9naW4uaHRtbCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcblxyXG59KTsiLCJhcHAuY29udHJvbGxlcignTG9naW5DdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgVXNlclNlcnZpY2UpIHtcclxuXHJcbiAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XHJcbiAgICAgICAgVXNlclNlcnZpY2UubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCgnbG9naW4nLCByZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59KTsiLCJhcHAuY29udHJvbGxlcignUG9zdHNDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgUG9zdHNTZXJ2aWNlKSB7XHJcblxyXG4gICAgUG9zdHNTZXJ2aWNlLmdldFBvc3RzKCkuc3VjY2VzcyhmdW5jdGlvbiAocG9zdHMpIHtcclxuICAgICAgICAkc2NvcGUucG9zdHMgPSBwb3N0cztcclxuICAgIH0pO1xyXG5cclxuICAgICRzY29wZS5hZGRQb3N0ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICBpZiAoJHNjb3BlLnBvc3RCb2R5KSB7XHJcblxyXG4gICAgICAgICAgICBQb3N0c1NlcnZpY2Uuc2F2ZVBvc3Qoe2JvZHk6ICRzY29wZS5wb3N0Qm9keX0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wb3N0cy51bnNoaWZ0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBvc3RCb2R5ID0gbnVsbDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSk7IiwiYXBwLnNlcnZpY2UoJ1Bvc3RzU2VydmljZScsIGZ1bmN0aW9uICgkaHR0cCkge1xyXG5cclxuICAgIHRoaXMuZ2V0UG9zdHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9wb3N0cycpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2F2ZVBvc3QgPSBmdW5jdGlvbiAocG9zdCkge1xyXG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Bvc3RzJywgcG9zdCk7XHJcbiAgICB9XHJcblxyXG59KTsiLCJhcHAuY29udHJvbGxlcignTG9nb3V0TW9kYWxDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UpIHtcclxuXHJcbiAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XHJcbiAgICB9O1xyXG5cclxufSk7IiwiYXBwLmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFVzZXJTZXJ2aWNlKSB7XHJcblxyXG4gICAgJHNjb3BlLmNyZWF0ZVVzZXIgPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XHJcblxyXG4gICAgICAgIHZhciB1c2VyID0ge1xyXG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgVXNlclNlcnZpY2UuY3JlYXRlVXNlcih1c2VyKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIFVzZXJTZXJ2aWNlLmxvZ2luKHJlc3BvbnNlLmRhdGEudXNlcm5hbWUsIHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCgnbG9naW4nLCByZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn0pOyIsImFwcC5zZXJ2aWNlKCdVc2VyU2VydmljZScsIGZ1bmN0aW9uICgkaHR0cCkge1xyXG5cclxuICAgIHZhciBzZXJ2aWNlID0gdGhpcztcclxuXHJcbiAgICBzZXJ2aWNlLmxvZ2luID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Nlc3Npb25zJywge1xyXG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxyXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCByZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZ2V0VXNlcigpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgc2VydmljZS5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aCddID0gXCJcIjtcclxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2VydmljZS5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLUF1dGgnXSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTtcclxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2VydmljZS5jcmVhdGVVc2VyID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnYXBpL3VzZXJzJywgdXNlcik7XHJcbiAgICB9XHJcblxyXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=